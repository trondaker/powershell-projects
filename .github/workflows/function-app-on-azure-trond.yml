name: Deploy blackjack function to existing Blackjack function-app.

on:
  [push]

env:
  AZURE_FUNCTIONAPP_NAME: blackjack-function-ta

jobs:
  build-and-deploy:
    runs-on: windows-latest
    environment: trond-prod
    steps:
    - name: 'Checkout GitHub Action'
      uses: actions/checkout@master

    - name: 'Login via Azure CLI'
      uses: azure/login@v1
      with:
        creds: ${{ secrets.AZURE_LOGIN }}

    - name: Publish WebJob
      uses: srijken/azure-webjob-deploy@master
      with: 
        zip-file: blackjack-function.zip
        publish-profile: ${{ secrets.AZURE_FUNCTIONAPP_PUBLISH_PROFILE }} 